<div class="review-form">
  <h3 class="form-title">Escribe tu reseña</h3>
  
  <div class="form-group">
    <label class="form-label">Calificación *</label>
    <app-calificacion 
      [calificacion]="rating" 
      [editable]="true"
      (calificacionCambiada)="onRatingChange($event)"
    ></app-calificacion>
    @if (rating === 0) {
      <span class="form-hint">Selecciona una calificación</span>
    }
  </div>

  <div class="form-group">
    <label for="title" class="form-label">Título de la reseña *</label>
    <input 
      type="text" 
      id="title"
      class="form-input"
      [(ngModel)]="title"
      placeholder="Resumen de tu experiencia"
      maxlength="100"
    />
    <span class="form-hint">{{ title.length }}/100 caracteres</span>
  </div>

  <div class="form-group">
    <label for="comment" class="form-label">Tu reseña *</label>
    <textarea 
      id="comment"
      class="form-textarea"
      [(ngModel)]="comment"
      placeholder="Cuéntanos sobre tu experiencia con este producto. ¿Qué te gustó? ¿Qué podría mejorar?"
      rows="5"
      maxlength="500"
    ></textarea>
    <span class="form-hint" [class.error]="!isCharacterCountValid() && comment.length > 0">
      {{ getCharacterCount() }}/500 caracteres (mínimo 10)
    </span>
  </div>

  <div class="form-actions">
    <button 
      type="button"
      class="btn-cancel"
      (click)="resetForm()"
      [disabled]="isSubmitting"
    >
      Cancelar
    </button>
    <button 
      type="submit"
      class="btn-submit"
      (click)="submitReview()"
      [disabled]="!canSubmit() || isSubmitting"
    >
      @if (isSubmitting) {
        <span class="spinner"></span>
        Publicando...
      } @else {
        Publicar reseña
      }
    </button>
  </div>

  <p class="form-disclaimer">
    Al enviar tu reseña, aceptas nuestras políticas de uso. Las reseñas son públicas y pueden ser moderadas.
  </p>
</div>
